### devops-10 student

### HW-5.2. Системы управления виртуализацией
---
1.<br>
В случае 100 виртуальных машин на базе Linux и Windows, общие задачи, нет особых требований. На мой взгляд, для этого лучше подходит использование программной или аппаратной виртуализации, т.к. в этом случае будет возможность создать виртуальные машины с полноценными операционными системами и  будет относительно просто подключить периферийные устройства, используя стандартные драйверы. Также, в этом случае, будет относительно легко управлять развернутыми образами и не возникнет проблем с развертыванием и настройкой программых балансировщиков и системами автоматической репликации и резервного копирования данных.<br>
В качестве производительного бесплатного opensource решения для виртуализации небольшой (20 серверов) инфраструктуры Linux и Windows виртуальных машин, как и в первом случае, следует использовать гетерогенную виртуальную среду, посторенного на базе Hyper-V и, например, OpenVZ , из плюсов такого решения  - низкая стоимость решения и полный функционал гостевых виртуальных машин, к минусам можно отнести - разнородность, но она является условием задачи, увеличение итоговой стоимости обслуживания, т.к. требуется обеспечить поддержку как минимум 2-х гипервизоров.<br>
Бесплатным, максимально совместимым и производительным решением для виртуализации Windows инфраструктуры является использование встроенного в дистрибутивы Windows гипервизора Hypev-V, который "из коробки" обеспечивает максимальную совместимость с windows-дистрибутивами.<br>
Для рабочего окружения для тестирование программного продукта на нескольких дистрибутивах Linux я бы выбрал решение KVM (Kernel-based Virtual Machine). Поскольку гостевые операционные системы взаимодействуют с гипервизором, который интегрирован в ядро Linux, у них есть возможность обращаться напрямую к оборудованию без нужды изменения гостевой ОС. Благодаря этому KVM считается довольно быстрым решением.<br>

2.<br>
- Если виртуальная машина уже работала на платформе VMWare (как чаще всего и бывает), то удаляем из нее VMWare Tools и выключаем машину.
- Теперь можно приступать к конвертации виртуального диска. Для этого воспользуемся бесплатной утилитой StarWind V2V Converter. Ее интерфейс и использование предельно просты. Выберем исходный виртуальный диск (файл с расширением vmdk).) 
 -	Далее нужно выбрать необходимый формат, для Hyper-V это формат MS Virtual PC. Утилита предалагает два варианта диска: расширяемый (growable) и pre-allocated, когда место выделяется на диске сразу.
- По окончании конвертации в папке с виртуальной машиной появится второй файл виртуального диска в формате Hyper-V.
- Его следует скопировать и разместить в хранилище виртуальных дисков Hyper-V.
- Теперь создадим новую виртуальную машину Hyper-V первого поколения и в опциях выбора жесткого диска укажем на сконвертированный файл.
- После создания перейдем к настройкам и выделим ресурсы согласно тем требованиям, которые были в настройках машины в VMWare.
- Запускаем смигрированную виртуальную машину.<br>

 3.<br>
Основным недостатком, на мой взгляд, является необходимость поддержания работоспособности нескольких гипервизоров, что приводит к увеличению стоимости такого решения, которое складывается из стоимости лицензий решений (пропорционально количеству типов гипервизоров), стоимости поддержки вендора гипервизоров, стоимости квалифицированных кадров и возможных накладных расходов на миграцию ВМ. Если система виртуализации проектируется с нуля, то лучшим решением будет использовать однородную среду виртуализации, что позволит существенно упростить дальнейшее администрирование виртуальных машин и снизит затраты, указанные выше. Однако, зачастую существование гетерогенных сред обусловлено различными факторами и является данностью. Для минимизации рисков и уменьшения вероятных проблем я бы стремился к увеличению доли какого-то одного гипервизора в it-ландшафте компании. 
